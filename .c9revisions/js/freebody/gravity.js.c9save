{"ts":1354997455218,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/**\r\n * gravity helpers\r\n */\r\n\r\ndefine(\r\n['src/Vector', 'src/utils'],\r\nfunction (Vector, utils) {\r\n    \r\n    var gravity = {};\r\n    \r\n    // Gravitational constants\r\n    var G = 0.000000000066,\r\n        G_EARTH = 9.8;\r\n    \r\n    /**\r\n     * Apply simple gravity (9.8 m/s^2 or given) to a body\r\n     * \r\n     * @param {Body} body\r\n     * @param {Number} [acceleration] = 9.8 by default\r\n     */\r\n    \r\n    gravity.simple = function (body, acceleration) {\r\n        // TEMP: 90 to correspond with down\r\n        var force = new Vector().angle(-90);\r\n        acceleration = acceleration || G_EARTH;\r\n        \r\n        // Gravitational force (not acceleration)\r\n        var g = function(){\r\n            force.magnitude(acceleration * body.mass);\r\n            return force;\r\n        };\r\n        \r\n        // Add gravitational force to body\r\n        body.forces.push(g);\r\n    };\r\n    \r\n    /**\r\n     * Apply planetary gravity to a body\r\n     * \r\n     * @param {Body} body to apply gravity to\r\n     * @param {Body} planet that generates gravity\r\n     * @param {Number} [power] = 2, used to exaggerate effect\r\n     */\r\n    \r\n    gravity.planetary = function (body, planet, power) {\r\n        var GM = G * planet.mass,\r\n            force = new Vector();\r\n        \r\n        // Allow for custom power for exaggerated effect\r\n        power = power || 2;\r\n        \r\n        // Gravitation force\r\n        var g = function() {\r\n            force.magnitude(\r\n                GM / Math.pow(utils.distance(body, planet), power) * body.mass    \r\n            );\r\n            force.angle(utils.angle(body, planet));\r\n\r\n            return force;\r\n        };\r\n        \r\n        // Add gravitational force to body\r\n        body.forces.push(g);\r\n    };\r\n    \r\n    return gravity;\r\n});    \r\n"]],"start1":0,"start2":0,"length1":0,"length2":1762}]],"length":1762}
{"contributors":["tim.hall.engr@gmail.com"],"silentsave":false,"ts":1354997457490,"patch":[[{"diffs":[[0,"ine(\r\n['"],[-1,"src"],[1,"freebody"],[0,"/Vector'"]],"start1":35,"start2":35,"length1":19,"length2":24},{"diffs":[[0,"', '"],[-1,"src"],[1,"freebody"],[0,"/uti"]],"start1":58,"start2":58,"length1":11,"length2":16}]],"length":1772,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356314710329,"patch":[[{"diffs":[[0,"nction()"],[1," "],[0,"{\r\n     "]],"start1":684,"start2":684,"length1":16,"length2":17},{"diffs":[[0,"var "],[-1,"GM = G * planet.mass,\r\n            "],[0,"forc"]],"start1":1192,"start2":1192,"length1":43,"length2":8},{"diffs":[[0,"    "],[-1,"GM"],[1,"(G * planet.mass)"],[0," / M"]],"start1":1428,"start2":1428,"length1":10,"length2":25}]],"length":1753,"saved":false}
